<div class="container">
  <div class="row">
    <div class="col-12">
      <h1>{{ editando ? 'Atualizar' : 'Cadastrar' }} livro</h1>
    </div>
  </div>
  <form #livroForm="ngForm" (ngSubmit)="salvar(livroForm)">
    <div class="row">
      <div class="col-6">
        <div class="form-group">
          <label for="nome">Nome do livro</label>
          <input type="text"
                 class="form-control"
                 #nmLivro="ngModel"
                 name="nm_livro"
                 id="nome"
                 required
                 placeholder="Digite o nome do livro"
                 [(ngModel)]="livro.nm_livro">
          <app-message-error
            [control]="nmLivro"
            error="required"
            message="Campo é obrigatório"
          ></app-message-error>
        </div>
      </div>
      <div class="col-6">
        <div class="form-group">
          <label for="autor">Autor</label>
          <input type="text"
                 class="form-control"
                 id="autor"
                 required
                 name="nm_autor"
                 #nm_autor="ngModel"
                 placeholder="Digite do livro"
                 [(ngModel)]="livro.nm_autor">
          <app-message-error
            [control]="nm_autor"
            error="required"
            message="Campo é obrigatório"
          ></app-message-error>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <div class="form-group">
          <label for="nomeEditora">Nome da editora</label>
          <input type="text"
                 class="form-control"
                 id="nomeEditora"
                 required
                 name="nm_editora"
                 #nm_editora="ngModel"
                 placeholder="Digite o nome da editora"
                 [(ngModel)]="livro.nm_editora">
          <app-message-error
            [control]="nm_editora"
            error="required"
            message="Campo é obrigatório"
          ></app-message-error>
        </div>
      </div>
      <div class="col-3">
        <div class="form-group">
          <label for="paginas">Quantidade de páginas</label>
          <input type="number"
                 class="form-control"
                 id="paginas"
                 required
                 name="num_paginas"
                 #num_paginas="ngModel"
                 placeholder="200"
                 [(ngModel)]="livro.num_paginas">
          <app-message-error
            [control]="num_paginas"
            error="required"
            message="Campo é obrigatório"
          ></app-message-error>
        </div>
      </div>
      <div class="col-3">
        <div class="form-group">
          <label for="lancamento">Ano de lançamento</label>
          <input type="date"
                 class="form-control"
                 #dd_lancamento="ngModel"
                 [(ngModel)]="livro.dt_lancamento"
                 name="dd_lancamento"
                 id="lancamento">
        </div>
      </div>
    </div>
    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <label class="input-group-text" for="selec">Categoria</label>
      </div>
      <select class="custom-select"
              id="selec"
              name="categoria_id"
              #categoria_id="ngModel" ngModel>
        <option value="{{ livro.id != ''? livro.id : '' }}" selected>
          {{ livro.id != true ? livro.categoria_id : 'Seleciona' }}
        </option>
        <option *ngFor="let categoria of categorias" value="{{ livro.nm_categoria }}">
          {{categoria.nm_categoria}}</option>
      </select>
    </div>

    <div class="d-flex justify-content-end">
      <div>
        <button type="button" onClick="javascript:history.go(-1);" class="btn btn-secondary mr-3">Voltar</button>
      </div>
      <div>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="!livroForm.valid">Salvar
        </button>
      </div>
    </div>
  </form>

</div>
